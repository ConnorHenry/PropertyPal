{"ast":null,"code":"var _jsxFileName = \"/Users/cex/Workspace/Property_Pal_React/property_pal/src/App.js\";\nimport React, { Component } from 'react';\nimport cheerio from 'cheerio';\nimport './App.css';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.getLocation = this.getLocation.bind(this);\n    this.success = this.success.bind(this);\n    this.error = this.error.bind(this);\n    this.getData = this.getData.bind(this);\n    this.getHouses = this.getHouses.bind(this);\n    this.getBt6houses = this.getBt6houses.bind(this);\n    this.state = {\n      lat: 0,\n      long: 0,\n      postCode: \"\",\n      houses: [],\n      bt6Houses: []\n    };\n    this.demo = React.createRef();\n    this.postcodeHTML = React.createRef();\n    this.houses = React.createRef();\n    this.BT6 = React.createRef();\n  }\n\n  getData() {\n    var xhr = new XMLHttpRequest();\n    xhr.addEventListener('load', () => {\n      var postCodeObj = JSON.parse(xhr.responseText);\n      var postCode = postCodeObj.result[0].postcode;\n      this.setState({\n        postCode: postCode\n      });\n      console.log(this.state.postCode);\n      this.postcodeHTML.innerHTML = \"Your post code is: \" + this.state.postCode;\n    });\n    xhr.open('GET', 'https://api.postcodes.io/postcodes?lon=' + this.state.long + '&lat=' + this.state.lat);\n    xhr.send();\n  }\n\n  getHouses() {\n    fetch('https://cors-anywhere.herokuapp.com/https://www.propertypal.com/search?sta=forSale&st=sale&runit=m&rlat=' + this.state.lat + '&rlng=' + this.state.long + '&pt=residential&nl=My+Location').then(response => response.text()).then(response => {\n      console.log(response);\n      const $ = cheerio.load(response);\n      var names = $('.propbox-addr').text().split(',');\n      this.setState({\n        houses: names\n      });\n      this.houses.innerHTML = this.state.houses;\n    }).catch(err => console.log(err));\n  }\n\n  getBt6houses() {\n    fetch('https://cors-anywhere.herokuapp.com/https://www.propertypal.com/property-for-sale/bt6').then(response => response.text()).then(response => {\n      console.log(response);\n      const $ = cheerio.load(response);\n      var names = $('.propbox-addr').text().split(',');\n      this.setState({\n        bt6Houses: names\n      });\n      this.BT6.innerHTML = this.state.bt6Houses;\n    }).catch(err => console.log(err));\n  }\n\n  getLocation() {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(this.success, this.error, this.options);\n    } else {\n      this.demo.innerHTML = \"Geolocation is not supported by this browser.\";\n    }\n  }\n\n  success(pos) {\n    var crd = pos.coords;\n    this.setState({\n      lat: crd.latitude\n    });\n    this.setState({\n      long: crd.longitude\n    });\n    this.demo.innerHTML = \"Thanks!! Your position is: <br>\" + \"Latitude: \" + crd.latitude + \"<br>Longitude: \" + crd.longitude;\n  }\n\n  error(err) {\n    this.demo.innerHTML = `ERROR(${err.code}): ${err.message}`;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }\n    }, \"Step 1: Click here to allow your location to be visible\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }, \"This gives the browser permission to view your location.\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.getLocation,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }\n    }, \"Click\"), /*#__PURE__*/React.createElement(\"p\", {\n      ref: r => this.demo = r,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }\n    }, \"Step 2: Then click here to get your post code:\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }\n    }, \"Using the coordinates above, we call an api to return the post code they belong to.\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.getData,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }\n    }, \"Click\"), /*#__PURE__*/React.createElement(\"p\", {\n      ref: r => this.postcodeHTML = r,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }\n    }, \"Step 3: Now click here to search Property Pal for houses in your area\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.getHouses,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }\n    }, \"Click\"), /*#__PURE__*/React.createElement(\"p\", {\n      ref: r => this.houses = r,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }\n    }, \"Step 4: Now search for properties with the post code BT6: \"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.getBt6houses,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }\n    }, \"Click\"), /*#__PURE__*/React.createElement(\"p\", {\n      ref: r => this.BT6 = r,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/cex/Workspace/Property_Pal_React/property_pal/src/App.js"],"names":["React","Component","cheerio","App","constructor","props","getLocation","bind","success","error","getData","getHouses","getBt6houses","state","lat","long","postCode","houses","bt6Houses","demo","createRef","postcodeHTML","BT6","xhr","XMLHttpRequest","addEventListener","postCodeObj","JSON","parse","responseText","result","postcode","setState","console","log","innerHTML","open","send","fetch","then","response","text","$","load","names","split","catch","err","navigator","geolocation","getCurrentPosition","options","pos","crd","coords","latitude","longitude","code","message","render","r"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport cheerio from 'cheerio';\nimport './App.css';\n\nclass App extends Component{\n\n  constructor(props) {\n    super(props);\n    this.getLocation = this.getLocation.bind(this);\n    this.success = this.success.bind(this);\n    this.error = this.error.bind(this);\n    this.getData = this.getData.bind(this);\n    this.getHouses = this.getHouses.bind(this);\n    this.getBt6houses = this.getBt6houses.bind(this);\n\n    this.state = {\n      lat: 0,\n      long: 0,\n      postCode: \"\",\n      houses: [],\n      bt6Houses: [],\n    }\n\n    this.demo = React.createRef();\n    this.postcodeHTML = React.createRef();\n    this.houses = React.createRef();\n    this.BT6 = React.createRef();\n  }\n\n  getData() {\n    var xhr = new XMLHttpRequest()\n\n    xhr.addEventListener('load', () => {\n      var postCodeObj = JSON.parse(xhr.responseText);\n      var postCode = postCodeObj.result[0].postcode;\n      this.setState({ postCode: postCode});\n      console.log(this.state.postCode);\n      this.postcodeHTML.innerHTML = \"Your post code is: \" + this.state.postCode;\n\n    })\n    \n    xhr.open('GET', 'https://api.postcodes.io/postcodes?lon='+this.state.long+'&lat='+this.state.lat)\n    xhr.send()    \n    \n  }\n\n  getHouses() {\n    fetch('https://cors-anywhere.herokuapp.com/https://www.propertypal.com/search?sta=forSale&st=sale&runit=m&rlat='+this.state.lat+'&rlng='+this.state.long+'&pt=residential&nl=My+Location')\n    .then(response => response.text())\n        .then((response) => {\n          console.log(response);\n          const $ = cheerio.load(response); \n\n          var names = $('.propbox-addr').text().split(',');\n\n          this.setState({ houses: names})\n\n          this.houses.innerHTML = this.state.houses\n      \n        })\n        .catch(err => console.log(err))\n\n  }\n\n  getBt6houses(){\n    fetch('https://cors-anywhere.herokuapp.com/https://www.propertypal.com/property-for-sale/bt6')\n    .then(response => response.text())\n        .then((response) => {\n          console.log(response);\n          const $ = cheerio.load(response); \n\n          var names = $('.propbox-addr').text().split(',');\n\n          this.setState({ bt6Houses: names})\n\n          this.BT6.innerHTML = this.state.bt6Houses\n      \n        })\n        .catch(err => console.log(err))\n  }\n\n  getLocation() {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(this.success, this.error, this.options)\n    } else {\n      this.demo.innerHTML = \"Geolocation is not supported by this browser.\";\n    }\n  }\n\n  success(pos) {\n    var crd = pos.coords;\n\n    this.setState({lat: crd.latitude});\n    this.setState({long: crd.longitude});\n\n    this.demo.innerHTML = \"Thanks!! Your position is: <br>\" + \"Latitude: \" + crd.latitude + \n    \"<br>Longitude: \" + crd.longitude; \n  }\n\n  error(err) {\n    this.demo.innerHTML =`ERROR(${err.code}): ${err.message}`;\n  }\n\n  render(){\n    return(\n      <div>\n        <p>Step 1: Click here to allow your location to be visible</p>\n        <p>This gives the browser permission to view your location.</p>\n        <button onClick={this.getLocation}>\n            Click\n        </button>\n        <p ref={r=>this.demo = r}></p>\n\n        <p>Step 2: Then click here to get your post code:</p>\n        <p>Using the coordinates above, we call an api to return the post code they belong to.</p>\n        <button onClick={this.getData}>\n            Click\n        </button>\n        <p ref={r=>this.postcodeHTML = r}></p>\n\n        <p>Step 3: Now click here to search Property Pal for houses in your area</p>\n        <button onClick={this.getHouses}>\n            Click\n        </button>\n        <p ref={r=>this.houses = r}></p>\n\n        <p>Step 4: Now search for properties with the post code BT6: </p>\n        <button onClick={this.getBt6houses}>\n            Click\n        </button>\n        <p ref={r=>this.BT6 = r}></p>\n       \n      </div>\n    );\n  }\n\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}